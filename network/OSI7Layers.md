# OSI 7 Layers

OSI 7계층(Open Systems Interconnection 7-layer model)은 네트워크 통신을 7개의 계층으로 나눈 모델이다. 각각의 계층은 특정한 네트워크 기능을 담당하며, 상위 계층은 하위 계층의 서비스를 이용해 데이터를 주고받는다. 7계층은 물리 계층(Physical Layer), 데이터 링크 계층(Data Link Layer), 네트워크 계층(Network Layer), 전송 계층(Transport Layer), 세션 계층(Session Layer), 표현 계층(Presentation Layer), 응용 계층(Application Layer)으로 구성됨.

## 각 계층의 역할
- **물리 계층(1계층):** 데이터 전송을 위한 실제 물리적 연결을 담당. 케이블, 스위치 등의 장비가 해당. (데이터 형식 : Bit)
- **데이터 링크 계층(2계층):** 물리 계층에서 오류가 발생하지 않도록 데이터를 프레임 단위로 전송하며, MAC 주소를 이용한 물리적 주소 지정 및 오류 검출 기능을 수행. (데이터 형식: Frame)
- **네트워크 계층(3계층):** 데이터를 목적지까지 전달하기 위한 경로 설정을 담당하며, IP 주소를 사용해 논리적 주소 지정과 라우팅 기능을 수행. (데이터 형식: Packet)
- **전송 계층(4계층):** 데이터의 전달을 신뢰성 있게 관리하며, TCP와 UDP 프로토콜을 사용해 데이터 전송의 오류 검출 및 복구를 담당. (Segment 또는 Datagram)
- **세션 계층(5계층):** 송수신 간의 세션을 관리하며, 데이터 통신의 연결, 유지, 종료를 담당. (데이터 형식: Data)
- **표현 계층(6계층):** 데이터의 표현 형식(예: 인코딩, 암호화, 압축)을 관리하여 서로 다른 시스템 간 데이터의 호환성을 보장. (데이터 형식: Data)
- **응용 계층(7계층):** 최종 사용자와 직접 상호작용하며, 웹 브라우저나 이메일 클라이언트와 같은 응용 프로그램이 포함된다. (데이터 형식: Data)

## Physical Layer
- 전기적인 신호로 데이터를 전달만 할 뿐, 어떤 데이터인지 어떤 에러가 있는지 등에는 신경을 쓰지 않는다.
- 대표적인 장비로는 케이블, 허브, 렌선 등이 있다.

## DataLink Layer
- 물리 계층을 통해 송수신되는 정보의 오류와 흐름을 관리하여 안전한 정보의 전달을 수행할 수 있도록 도와주는 역할
- 전송 중 발생할 수 있는 오류를 검출 및 수정, 회선 제어(신호 간의 충돌이 발생하지 않도록 제어), 흐름을 제어(송수신자 간 데이터를 처리하는 속도 차이를 해결하기 위한 제어)하는 역할을 수행
- 헤더의 Mac주소를 가지고 통신을 한다.
- 데이터 단위는 프레임. 네트워크 계층에서 받아온 데이터그램을 프레임 단위로 만들고 헤더와 트레일러를 추가한다. Header는 목적지, 출발지 주소 그리고 데이터 내용을 정의하며 Trailer는 비트의 에러를 감지한다.
- 대표적인 장비로는 스위치, 브리지, 이더넷이 있다.
<br/>[MAC 주소란]()

## Network Layer
### 주요 기능
1. **Forwarding(Data plane) :** 네트워크 장치, 주로 라우터가 수신된 데이터 패킷을 목적지 또는 다음 홉으로 보내는 과정이다(라우터 내부의 동작). 라우터는 이 과정에서 포워딩 테이블을 참고하여, 목적지 IP 주소에 맞는 최적의 다음 홉(next hop)으로 패킷을 전송
    - Forwarding의 과정 : 
        - 패킷 수신: 라우터는 다른 네트워크 장치로부터 데이터 패킷을 수신.
        - 헤더 분석: 수신된 패킷의 IP 헤더를 분석하여 목적지 IP 주소를 확인.
        - 포워딩 테이블 조회: 라우터는 자신의 포워딩 테이블(또는 라우팅 테이블)을 조회하여 목적지 IP 주소와 일치하거나 가장 근접한 경로를 찾는다.
        - 다음 홉 결정: 포워딩 테이블에 따라 패킷을 전달할 다음 홉 라우터의 IP 주소와 해당 인터페이스를 결정.
        - 패킷 전송: 패킷을 다음 홉으로 전송.
    - Forwarding 테이블 : 라우터가 패킷을 올바른 경로로 전송하기 위해 사용하는 데이터 구조입. 이 테이블에는 목적지 IP 주소, 서브넷 마스크, 다음 홉 IP 주소, 사용해야 하는 인터페이스 등의 정보가 포함되어 있다. 포워딩 테이블은 라우팅 프로토콜에 의해 지속적으로 갱신됨.
    - Forwarding 방식
        1. Destination-based forwarding
        2. Genalized forwarding
    - Data Plane : 네트워크 장치 내에서 데이터 패킷을 처리하고 실제로 전송하는 모든 기능적 활동을 포함하는 영역. Data Plane은 패킷의 전송, 포워딩, 필터링, QoS(서비스 품질) 처리 등 데이터가 장치에 들어오고 나가는 과정에서 일어나는 모든 활동을 포괄. Forwarding은 Data Plane에서 이루어지는 주요 작업 중 하나다.

2. **Routing(Control Plane) :** 패킷이 올바른 목적지에 도달할 수 있도록 경로를 선택하고, 그 경로를 따라 패킷을 전달하는 과정을 의미한다. 라우터는 네트워크 간의 경로를 설정하고 패킷을 전달하는 역할을 하며, 각 라우터는 자신이 알고 있는 네트워크 정보를 바탕으로 최적의 경로를 결정.
    - **라우팅 테이블** : 라우터에 저장된 데이터 구조로, 네트워크 경로에 대한 정보를 담고 있다. 이 테이블에는 목적지 IP 주소, 다음 홉(Next Hop) 라우터의 IP 주소, 네트워크 마스크, 사용해야 하는 인터페이스 등이 포함되어 있다.
    - 라우터는 수신된 패킷의 목적지 IP 주소를 확인한 후, 라우팅 테이블을 참조하여 패킷을 다음 홉 라우터로 전달한다.
    - 라우팅 프로토콜 종류
        - 전통적인 라우팅 프로토콜 : 라우팅 알고리즘을 기반으로 각 라우터들는 독립적으로 라우팅 결정을 내리며, 전체 네트워크 상태를 기반으로 최적 경로를 계산한다. 네트워크 상태 변화에 따라 라우팅 테이블이 동적으로 갱신되며, 이 과정에서 각 라우터는 라우팅 프로토콜을 통해 서로 정보를 교환한다.
            - 단점 : 매우 큰 네트워크에서는 라우팅 테이블이 복잡해지고, 라우터 간의 정보 교환이 비효율적일 수 있으며, 네트워크 환경 변화에 대한 적응성이 떨어진다.
            - 프로토콜 종류
                - IGP (Interior Gateway Protocol): 자율 시스템(Intra-AS) 내부에서 라우팅을 수행하는 프로토콜.
                    - OSPF (Open Shortest Path First)
                    - RIP (Routing Information Protocol)
                    - EIGRP (Enhanced Interior Gateway Routing Protocol)
                - EGP (Exterior Gateway Protocol): 서로 다른 자율 시스템(Inter-AS) 간의 라우팅을 수행하는 프로토콜.
                    - BGP (Border Gateway Protocol)
        - SDN 기반의 라우팅 : 전통적인 네트워크 장치에서는 컨트롤 플레인과 데이터 플레인이 같은 장치 내에서 동작한다. SDN에서는 컨트롤 플레인과 데이터 플레인을 분리하여, 컨트롤 플레인을 (CAs)중앙에서 관리할 수 있도록 한다. 데이터 플레인은 네트워크 장치가 계속해서 처리하지만, 경로 결정 및 정책 관리와 같은 제어 기능은 중앙 집중식 SDN 컨트롤러가 맡는다. remote controller server에서 각각의 라우터에 대해 control agent(CAs)를 두어 라우터들과 통신하며 라우팅 테이블을 내려보낸다.
            - 중앙 집중식 관리를 통해 네트워크 운영의 복잡성을 줄이고, 변경 사항에 빠르게 대응할 수 있습니다.

### IP
- 네트워크 계층은 데이터를 전송하기 위해 각 장치에 고유한 논리적 주소를 부여하는데, 이 논리적 주소가 바로 IP주소다. 네트워크 계층은 이 주소를 사용해 데이터를 목적지까지 전달한다.
- 라우팅: 각 패킷은 목적지 IP 주소를 기반으로 경로가 설정되고, 라우터는 IP주소 정보를 참조하여 다음 홉을 결정한다.

#### IPv4 
    - **주소 길이:** IPv4는 32비트 주소 체계를 사용하여 총 약 43억 개(2^32)의 고유한 IP 주소를 제공한다.
    - **주소 형식:** IPv4 주소는 4개의 옥텟(8비트로 구성된 그룹)으로 이루어져 있으며, 각 옥텟은 0부터 255까지의 숫자로 표현된다. 예를 들어, `192.168.1.1`과 같은 형식.
    - **주소 고갈 문제:** IPv4는 1980년대에 설계되었으며, 초기 인터넷 성장에 충분했지만, 인터넷 사용이 폭발적으로 증가하면서 고유한 IPv4 주소가 부족해지는 문제가 발생했다.
    - **네트워크 설정:** IPv4에서는 네트워크를 서브넷으로 나누기 위해 서브넷 마스크(subnet mask)를 사용한다.
    - **네트워크 구성:** IPv4는 주로 DHCP(Dynamic Host Configuration Protocol)를 통해 IP 주소를 자동으로 할당하며, NAT(Network Address Translation)를 통해 여러 장치가 하나의 공인 IP 주소를 공유할 수 있게 한다.
    - **보안:** IPv4 자체는 보안 기능이 부족하므로, 보안을 위해 IPSec(Internet Protocol Security)과 같은 별도의 프로토콜을 사용해야 한다.

<br/>[DHCP]()
<br/>[NAT]()

#### IPv6
    - **주소 길이:** IPv6는 128비트 주소 체계를 사용하여 사실상 무한에 가까운(2^128) 고유한 IP 주소를 제공한다. 이는 IPv4에서 발생한 주소 고갈 문제를 해결한다.
    - **주소 형식:** IPv6 주소는 16비트씩 8개 그룹으로 구성되며, 콜론(:)으로 구분된 16진수 형식으로 표현된다. 예를 들어, `2001:0db8:85a3:0000:0000:8a2e:0370:7334`와 같은 형식입니다. 연속된 0는 `::`로 축약할 수 있어 `2001:db8::8a2e:370:7334`처럼 표현할 수 있다.
    - **주소 공간:** IPv6는 주소 공간이 매우 넓어, 전 세계적으로 모든 장치에 고유한 IP 주소를 제공할 수 있다. 이로 인해 NAT(Network Address Translation)와 같은 기술이 필요하지 않다.
    - **네트워크 설정:** IPv6에서는 자동 구성 기능이 내장되어 있으며, 장치가 네트워크에 연결되면 자동으로 IP 주소를 설정할 수 있다(SLAAC: Stateless Address Autoconfiguration).
    - **보안:** IPv6는 보안 기능을 기본적으로 통합하고 있다. 예를 들어, IPSec이 IPv6에 기본적으로 내장되어 있어 데이터 전송의 보안을 강화할 수 있다.
    - **확장성과 효율성:** IPv6는 패킷 헤더 구조가 IPv4보다 간단하며, 확장 헤더를 사용하여 필요에 따라 추가 기능을 지원할 수 있다. 또한, IPv6는 멀티캐스트 전송을 효율적으로 지원하며, 더 나은 QoS(Quality of Service) 제공을 위한 플로우 라벨링(Flow Labeling) 기능이 포함되어 있다.
### Tunneling

### ICMP


## Transport Layer



